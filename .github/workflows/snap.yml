# Build and publish Snap package
name: Snap

on:
    push:
        tags:
            - "v*"
    workflow_dispatch:

jobs:
    snap:
        name: Build Snap
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v6

            - name: Build Snap
              uses: snapcore/action-build@v1
              id: build

            - name: Upload Snap artifact
              uses: actions/upload-artifact@v4
              with:
                  name: snap-package
                  path: ${{ steps.build.outputs.snap }}
                  retention-days: 7

            # Optional: Publish to Snap Store
            # Requires SNAPCRAFT_STORE_CREDENTIALS secret
            # - name: Publish to Snap Store
            #   uses: snapcore/action-publish@v1
            #   if: startsWith(github.ref, 'refs/tags/v')
            #   env:
            #     SNAPCRAFT_STORE_CREDENTIALS: ${{ secrets.SNAPCRAFT_STORE_CREDENTIALS }}
            #   with:
            #     snap: ${{ steps.build.outputs.snap }}
            #     release: stable
